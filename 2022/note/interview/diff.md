# diff

## 2022-7-24

### 观看答案前
- 有虚拟dom的地方必然会存在 `diff算法` 
  - 当 `虚拟dom` 新旧dom 发生改变的时候，通过 diff算法， 可以吧算法复杂度 弄到 O(N)
- diff算法的 主要策略是 通过 `深度优先 => 同级比较`
  - 也就是 如果 新旧dom 都有子孩子的情况下， 会先去对比，自孩子
  - 同层比较 也就是， 如果少 就加， 如果多 就删， 相同就跳过
- 里面最主要的一个算法就是 `updateChilren` 这个函数方法
  - 他通过 四次收尾对比的方法，来进行更加生层次的比较来进行处理  

### 观看答案后
- 第一点
  - 将变化的地方更新到真实dom
  - 高效的手法
- vue2 中
  - 因为 `watcher` 变成了每一个组件有一个这玩意，只有通过 diff 才能更加细致的找到问题发生的地方
- diff 算法执行的时候，通常是在 更新函数执行的时候
  - 这个过程叫做 `patch` 打补丁
- 通过头尾节点比较，也会借助 key 来进行比较， 所以 patch 的过程是比较快的

## 林一三 的博客

### 介绍
- 可能存在一些问题，或者说不够详细，但，是是没有任何问题的
- [参考博客](https://juejin.cn/post/6994959998283907102#heading-9)
### 内容小总结

#### 流程
- 当我的数据更新之后，出发 `setter` 并通过 `dep.notice` 通知 每个组件的 `watcher(订阅者)` ，这些订阅者调用 `patch`  给 `真实dom` 打补丁 ，更新相应的区域
  
#### patch
-  对于两个节点的 开始方法
- 里面通过各种方式进行对于 两个节点的不同
- 之后进行一个 添加和删除的操作都是有可能的

#### sameVnode
- 判断两个节点是不是同一种类似的节点
  - 如果是同一种类似才有递归的理由
  - 不是就可以执行替换操作了 ，删除和添加操作等等

#### patchVnode
-  判断对于 元素是需要删除还是添加还是更新的操作的函数

#### updateChildren
- 最重要的一个方法
- `首尾指针法` 重点
  - 通过四个 头尾指针 的比较和 key 值得映射关系，可以更快的执行 更新操作


## 犹大解析 diff 算法

### 介绍
- diff算法 并不一定是为了解决真实dom 慢的原因，可能还有许多其它的原因才是一个重点
  - 虚拟dom价值主要是提升开发效率，和多端适配。强调性能的面试官
### 小总结
